<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Details</title>
    {%load static%}
    <link rel="stylesheet" href="{% static 'transactions.css'%}">
</head>
<body>
 <div class="navbar">
        <div class="content">
        <h1>MoneyWise</h1>
        <h3>Welcome back, {{username}}</h3>
        <div class="profile-wrapper">
            <div class="profile-icon" onclick="toggleDropdown()">P</div>
            <div class="profile-dropdown" id="profileDropdown">
                <div class="dropdown-header">
                    <div class="dropdown-user-info">
                        <h4>{{first_name}}  {{last_name}}</h4>
                        <p>{{email}}</p>
                    </div>
                </div>
                <div class="dropdown-menu">
                    <a href="#" class="dropdown-item">
                        <span class="icon-profile"></span>
                        My Profile
                    </a>
                    <a href="#" class="dropdown-item">
                        <span class="icon-settings"></span>
                        Settings
                    </a>
                    <a href="#" class="dropdown-item">
                        <span class="icon-security"></span>
                        Privacy & Security
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item">
                        <span class="icon-help"></span>
                        Help & Support
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="{% url 'Logout'%}" class="dropdown-item logout">
                        <span class="icon-logout"></span>
                        Sign Out
                    </a>
                </div>
            </div>
            </div>
            </div>
        </div>
    <div class="Text">
        <h1 id="jpt">All Transactions</h1>
        <p id="haude">View and manage your financial transactions</p>
    </div>
    <div class="filter-container">
        <div class="filter-box">
            <div class="top-box">
                <h3>Filters</h3>
                <a>Reset All</a>
            </div>
        </div>
            <div class="middle-box">
                <div class="search">
                <label for="">Search transactions</label>
                <input type="text" placeholder="Search by merchant,category">
                </div>
                <div class="Category">
                    <label for="category">Category</label>
                    <select name="Category" id="category">
                        <option value="">option1</option>
                        <option value="">option2</option>
                    </select>
                </div>
                <div class="Category">
                    <label for="date">Date-Range</label>
                    <select name="Category" id="date">
                        <option value="">option1</option>
                        <option value="">option2</option>
                    </select>
                </div> 
                <div class="Category">
                    <label for="amount">Amount</label>
                    <select name="Category" id="amount">
                        <option value="">option1</option>
                        <option value="">option2</option>
                    </select>
                </div> 
            </div>
                <div class="bottom-box">
                    <button class="btn active">All</button>
                    <button class="btn">Expenses</button>
                    <button class="btn">Income</button>
                    <button class="btn">Pending</button>
                </div>
    </div>
    <div class="boxes">
        <a href="#"><div class="box">
            <div class="header">
                <div id='total'>Total Balance</div>
            </div>
            <div class="Total amount">{{balance}}</div>
        </div></a>
        <a href="#"><div class="box two">
            <div class="header">
                <div id='total'>Total Income</div>
                
            </div>
            <div class="Total amount">{{income}}</div>
           
        </div></a>
        <a href="#"><div class="box three">
            <div class="header">
                <div id='total'>Total Expenses</div>
                
            </div>
            <div class="Total amount">{{expense}}</div>
           
        </div></a>
        <a href="#"><div class="box four">
            <div class="header">
                <div id='total'>Total Savings</div>
                
            </div>
            <div class="Total amount">{{savings}}</div>
            
        </div></a>
    </div>
    <div class="history">
        <div class="header">
        <h2>Recent Transactions</h2>
        <p>Showing 1-10 of x transactions</p>
        </div>
        {%for i in transaction%}
            <div class="body">
                <div class="transaction-item">
                    <div class="transaction-info">
                        <div class="transaction-details">
                            <h4>{{i.category}}</h4>
                            <p>{{i.description}} â€¢ {{i.spent_date}}</p>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount amount-negative">{{i.amount}}</div>
                        <div class="transaction-actions">
                            <a href="{% url 'Edit_Expense' pk=i.id%}"><button class="action-btn edit-btn">Edit</button></a>
                            <button class="action-btn delete-btn" onclick="deleteTransaction(this)">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        {%endfor%}
    </div>
    <script>
        // Profile dropdown functionality
function toggleDropdown() {
    const dropdown = document.getElementById('profileDropdown');
    dropdown.classList.toggle('show');
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const profileWrapper = document.querySelector('.profile-wrapper');
    const dropdown = document.getElementById('profileDropdown');
    
    if (!profileWrapper.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});
    </script>
</body>
</html>